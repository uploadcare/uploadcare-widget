<meta charset="UTF-8">
<script>
  UPLOADCARE_PUBLIC_KEY = "demopublickey";
  UPLOADCARE_TABS = "default huddle";
  UPLOADCARE_DEBUG_UPLOADS = true;
</script>
<script src="./uploadcare.full.js"></script>
<script>
  $ = uploadcare.jQuery;
  jQuery = uploadcare.jQuery;
</script>

<p>
  Weâ€™ve developed a beautiful widget for the web.
  <input type="hidden" data-images-only data-crop role="uploadcare-uploader" />
  It can do everything from drag-and-drop to selecting photos from various
  social networking sites like Facebook.
  <input
    type="hidden"
    data-tabs="facebook file url"
    role="uploadcare-uploader"
  />
</p>

<p>
  Graceful pub key:
  <input
    type="hidden"
    role="uploadcare-uploader"
    data-public-key=""
    data-multiple=""
  />
</p>

<label>
  Clearable:
  <input type="hidden" role="uploadcare-uploader" data-clearable />
</label>

<div id="last-result"></div>
<ul id="events"></ul>
<script>
  $(function($) {
    var log = function(text) {
      var time = new Date().toLocaleTimeString();
      $("<li>")
        .appendTo("#events")
        .text(time + " " + text);
    };
    var widgets = uploadcare.initialize();
    for (var i = 0; i < widgets.length; i++) {
      widgets[i].onChange.add(function(file) {
        if (file) {
          file.done(function(info) {
            log("change: " + info.uuid);
            $("#last-result").html(
              $("<img/>", {
                src: info.originalUrl + "-/preview/500x500/"
              })
            );
          });
        } else {
          $("#last-result").empty();
          log("change: (empty)");
        }
      });
    }
  });
</script>
